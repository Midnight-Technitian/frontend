<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manager Dashboard - Midnight Technician</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/dashboard.css" rel="stylesheet">
    <link href="/css/manager_dashboard.css" rel="stylesheet">
    <link href="/css/header.css" rel="stylesheet">
    <link href="/css/new_ticket.css" rel="stylesheet">

    <script type="text/javascript" src="/js/CreateEmployee.js"></script>
</head>
<body>
<div th:replace="~{fragments/header::header}"></div>

<!-- Header -->
<div class="dashboard-header">
    <div class="container text-center">
        <h1 class="welcome-title">Welcome, <span th:text="${employee.firstName()}" class="customer-name">Manager</span>!</h1>
        <p class="welcome-subtitle">Monitor your team, customers, and ticket activity in real time</p>
    </div>
</div>

<!-- Main Dashboard -->
<div class="container dashboard-container">

    <!-- Quick Overview -->
    <section class="quick-actions-section">
        <div class="actions-grid">
            <button class="action-card" onclick="openNewEmployeeModal()">
                <div class="action-icon">üë∑‚Äç‚ôÇÔ∏è</div>
                <h3>Employees</h3>
                <p th:text="${#lists.size(employees)} + ' active'">8 active</p>
            </button>

            <div class="action-card">
                <div class="action-icon">üíº</div>
                <h3>Customers</h3>
                <p th:text="${#lists.size(customers)} + ' registered'">120 registered</p>
            </div>

            <div class="action-card">
                <div class="action-icon">üé´</div>
                <h3>Active Tickets</h3>
                <p th:text="${activeTicketCount} + ' open'">42 open</p>
            </div>

            <div class="action-card">
                <div class="action-icon">‚úÖ</div>
                <h3>Resolved This Month</h3>
                <p th:text="${resolvedTicketCount} + ' closed'">80 closed</p>
            </div>
        </div>
    </section>

    <!-- Employee Management -->
    <section class="tickets-section">
        <div class="section-header">
            <h2 class="section-title">Team Overview</h2>
            <span class="ticket-count" th:text="${#lists.size(employees)} + ' total'">8 total</span>
        </div>

        <div class="tickets-grid">
            <div th:each="employee : ${employees}" class="ticket-card status-progress">
                <div class="ticket-header">
                    <span class="ticket-id" th:text="${employee.employeeId}">E-102</span>
                </div>
                <h3 class="ticket-title" th:text="${employee.firstName + ' ' + employee.lastName}">John Doe</h3>
<!--                <p class="ticket-description" th:text="'Tickets Assigned: ' + ${employee.openTicketsCount}">Tickets Assigned: 5</p>-->
                <div class="ticket-footer">
                    <button class="ticket-view-btn">View Profile</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Ticket Overview -->
    <section class="tickets-section">
        <div class="section-header">
            <h2 class="section-title">Recent Tickets</h2>
            <span class="ticket-count" th:text="${#lists.size(recentTickets)} + ' recent'">10 recent</span>
        </div>

        <div class="tickets-grid">
            <div th:each="ticket : ${recentTickets}" class="ticket-card" th:classappend="${ticket.status}">
                <div class="ticket-header">
                    <span class="ticket-id" th:text="'#' + ${ticket.ticketId}">#5678</span>
                    <span class="ticket-status" th:text="${ticket.status}">Open</span>
                </div>
                <h3 class="ticket-title" th:text="${ticket.title}">Network issue</h3>
                <p class="ticket-description" th:text="${ticket.description}">Router disconnected randomly...</p>
                <div class="ticket-footer">
                    <span class="ticket-date" th:text="${ticket.updatedAt}">2025-10-25</span>
                </div>
            </div>
        </div>
    </section>

    <footer class="dashboard-footer">
        <p class="tagline"><em>Midnight Technician ‚Äì Empowering Your Team.</em></p>
    </footer>
</div>

<div th:replace="~{fragments/view/admin/employee_creation_modal::new_employee}"></div>
</body>
</html>
